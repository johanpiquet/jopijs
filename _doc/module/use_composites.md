# Using composites

## What are composites

Suppose you have a list of React.js components that you display. You would like the content of this list to be able to be enriched by other modules. This need is the purpose of composites.

A composite is a React.js component whose content can be extended by modules: while being compatible with bundlers (Vite.js/WebPack, and especially Jopi's internal bundler).

## Why use composites?

This compatibility with bundlers is the difficulty with this type of pattern, because either the bundlers' pruning system introduces strange, hard-to-understand anomalies, or you are forced to pre-load your component code, which is included even where it is not needed.

This is why Jopi proposes a pattern intended to implement such a system in an elegant and compatible way.

## Creating a composite

Composites are declared statically, in a similar way to the event system seen previously. Each module can enrich an existing composite.

```
|- mod_moduleA/
 |- @alias/
  |- uiComposites/       < Where our composites are declared
   |- comp1              < The name for the composite
	  |- a1              < Names determine the composites order (sorted ASC)
	     |- index.tsx    < Export the React component
      |- a2
      |- a3
|- mod_moduleB/      
 |- @alias/
  |- uiComposites/
   |- comp1                < moduleB will extend our composite
      |- a2b               < Here we add an item to the list (4th position)
	  |- a1                < The name is an indication for list item order
	     |- index.tsx      <   but allows overriding an existing element.
	     |- high.priority  < This priority allows to know who overrides
	                           and who is overridden.
```

As indicated in the example, it is possible to override a component of the same name. For this, the one that overrides must have a higher priority than the one that will be overridden. The default priority is `default.priority`.

## Using a composite

Using a composite is very simple. Here is an example for the composite created in the example.

```typescript jsx
import MyComposite from "@/uiComposites/comp1";  
    
export default function() {
    return <MyComposite />  
}
```

Here, the MyComposite component includes the elements a1, a2, a2b, and a3, in the order indicated.

> If you examine the code generated by the bundler, you will see that everything is optimized, in the sense that no element of MyComposite is included if MyComposite is not used.